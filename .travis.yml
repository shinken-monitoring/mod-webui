language: python
sudo: true
python:
  - "2.7"
  # - "2.6"

# command to install dependencies
# some are only used for travis/coveralls so we are installing them here only
install:
  - bash test/setup_test.sh

script:
  - cd test
  - pip freeze
  - echo "Starting tests..."
  - pytest --verbose --durations=10 --no-print-logs --cov=module --cov-config .coveragerc test_*.py
  - # Upload coverage results to codecov
  - bash <(curl -s https://codecov.io/bash) -e test
  - cd ..

jobs:
  include:
    - stage: Coding standard
      script:
        # Static code analysis
        # -- pycodestyle (former pep8)
        - pycodestyle --max-line-length=100 --exclude='*.pyc' module/*
        # -- pylint
        - pylint --rcfile=.pylintrc -r no module
        # -- pep257
        - pep257 --select=D300 module
